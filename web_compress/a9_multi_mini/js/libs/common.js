$(document).ajaxError(function(){});function checkIpInSameSegment(ip_lan,mask_lan,ip_wan,mask_wan){if(ip_lan===""||ip_wan===""){return false}var ip1Arr=ip_lan.split("."),ip2Arr=ip_wan.split("."),maskArr1=mask_lan.split("."),maskArr2=mask_wan.split("."),maskArr=maskArr1,i;for(i=0;i<4;i++){if(maskArr1[i]!=maskArr2[i]){if(maskArr1[i]&maskArr2[i]==maskArr1[i]){maskArr=maskArr1}else{maskArr=maskArr2}break}}for(i=0;i<4;i++){if((ip1Arr[i]&maskArr[i])!=(ip2Arr[i]&maskArr[i])){return false}}return true}function checkIsVoildIpMask(ip,mask,str){var ipArry,maskArry,len,maskArry2=[],netIndex=0,netIndex1=0,broadIndex=0,i=0;str=str||_("IP Address");ipArry=ip.split("."),maskArry=mask.split("."),len=ipArry.length;for(i=0;i<len;i++){maskArry2[i]=255-Number(maskArry[i])}for(var k=0;k<4;k++){if((ipArry[k]&maskArry[k])==0){netIndex1+=0}else{netIndex1+=1}}for(var k=0;k<4;k++){if((ipArry[k]&maskArry2[k])==0){netIndex+=0}else{netIndex+=1}}if(netIndex==0||netIndex1==0){return _("%s can't be the network segment.",[str])}for(var j=0;j<4;j++){if((ipArry[j]|maskArry[j])==255){broadIndex+=0}else{broadIndex+=1}}if(broadIndex==0){return _("%s can't be the broadcast address.",[str])}return}function objToString(obj){var str="",prop;for(prop in obj){str+=prop+"="+encodeURIComponent(obj[prop])+"&"}str=str.replace(/[&]$/,"");return str}function inputValue(obj,callback){var prop,tagName;for(prop in obj){if(prop&&$("#"+prop).length>0){tagName=document.getElementById(prop).tagName.toLowerCase();switch(tagName){case"input":case"select":if(document.getElementById(prop).type=="checkbox"){if(obj[prop]=="true"){document.getElementById(prop).checked=true}else{document.getElementById(prop).checked=false}}else{$("#"+prop).val(obj[prop])}break;default:if($("#"+prop).hasClass("textboxs")||$("#"+prop).hasClass("input-append")){$("#"+prop)[0].val(obj[prop])}else{$("#"+prop).text(obj[prop])}break}}else{if(prop&&$("[name='"+prop+"']").length>1){if($("[name='"+prop+"']").is("input")){if($("[name='"+prop+"'][value='"+obj[prop]+"']").length>0){$("[name='"+prop+"'][value='"+obj[prop]+"']")[0].checked=true}}else{if($("[name='"+prop+"']").is("span")){$("[name='"+prop+"']").text(obj[prop])}}}}}if(typeof callback=="function"){callback.apply()}}function formatSeconds(value){var theTime=parseInt(value);var theTime1=0;var theTime2=0;var theTime3=0;if(theTime>60){theTime1=parseInt(theTime/60);theTime=parseInt(theTime%60);if(theTime1>60){theTime2=parseInt(theTime1/60);theTime1=parseInt(theTime1%60);if(theTime2>24){theTime3=parseInt(theTime2/24);theTime2=parseInt(theTime2%24)}}}var result=""+parseInt(theTime)+_("s");if(theTime1>0){result=""+parseInt(theTime1)+_("m")+" "+result}if(theTime2>0){result=""+parseInt(theTime2)+_("h")+" "+result}if(theTime3>0){result=""+parseInt(theTime3)+_("d")+" "+result}return result}function Encode(){var base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function utf16to8(str){var out,i,len,c;out="";len=str.length;for(i=0;i<len;i++){c=str.charCodeAt(i);if((c>=1)&&(c<=127)){out+=str.charAt(i)}else{if(c>2047){out+=String.fromCharCode(224|((c>>12)&15));out+=String.fromCharCode(128|((c>>6)&63));out+=String.fromCharCode(128|((c>>0)&63))}else{out+=String.fromCharCode(192|((c>>6)&31));out+=String.fromCharCode(128|((c>>0)&63))}}}return out}function base64encode(str){var out,i,len;var c1,c2,c3;len=str.length;i=0;out="";while(i<len){c1=str.charCodeAt(i++)&255;if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt((c1&3)<<4);out+="==";break}c2=str.charCodeAt(i++);if(i==len){out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&3)<<4)|((c2&240)>>4));out+=base64EncodeChars.charAt((c2&15)<<2);out+="=";break}c3=str.charCodeAt(i++);out+=base64EncodeChars.charAt(c1>>2);out+=base64EncodeChars.charAt(((c1&3)<<4)|((c2&240)>>4));out+=base64EncodeChars.charAt(((c2&15)<<2)|((c3&192)>>6));out+=base64EncodeChars.charAt(c3&63)}return out}return function(s){return base64encode(utf16to8(s))}}function getRandom(){return"?random="+Math.random()}function ModuleView(){var that=this;this.rebootIP=null;this.moduleRequireObj={};this.getValue=function(url,requireObj){that.url=url;that.moduleRequireObj=requireObj;$.GetSetData.setData(url,$.extend({random:Math.random()},requireObj),function(obj){var jsonObj=$.parseJSON(obj);that.initValue(jsonObj)})};this.initValue=function(obj){};this.showInvalidError=function(str){pageLogic.showModuleMsg(str)};this.successCallback=function(str){var num=$.parseJSON(str).errCode||"-1";var ip=that.rebootIP||"";if(num==0){pageLogic.showModuleMsg(_("Saved successfully!"));that.getValue(that.url,that.moduleRequireObj)}else{if(num=="2"){pageLogic.showModuleMsg(_("Fail to change password! Old Password is not correct."))}else{if(num=="100"){progressLogic.init("","reboot",200,ip)}else{if(num=="101"){top.location.href="./login.html"}else{if(num=="102"){pageLogic.showModuleMsg(_("Saved successfully!"));that.getValue(that.url,{module1:"sysPwd",module2:"firmware"})}}}}}$("#submit").removeAttr("disabled")};this.showErrMsg=function(){pageLogic.showModuleMsg(_("Upload data error!"));$("#submit").removeAttr("disabled")}}function ModuleSubmit(){this.preSubmit=function(obj){$.ajax({url:obj.url,type:"POST",data:obj.subData,success:obj.successCallback,error:obj.errorCallback});$("#submit").attr("disabled",true)}}function reInitDialogHeight(_id){var height=parseInt($("#"+_id+" .dialog-content").css("height"),10)+100;height=height>350?height:350;top.$(".main-dailog").css({top:"50%","margin-top":-height/2-30+"px",height:height+"px"});if(top.$(".main-dailog").offset().top<0){top.$(".main-dailog").css({top:"10px","margin-top":"0"})}}function showDialog(Id,width,height,extraDataStr){extraDataStr=extraDataStr||"";if(!$("#progress-overlay").hasClass("in")){$("#progress-overlay").addClass("in")}$("#"+Id).removeClass("none");$(".dailog-iframe").css("width",width+"px");$(".main-dailog").css({top:"50%","padding-left":"0px","padding-right":"0px","margin-top":-$(".main-dailog").outerHeight()/2+"px"});$("#"+Id+" .head_title2").addClass("none").removeClass("selected");$(".fopare-ifmwrap-title").removeClass("border-bottom");$("#"+Id+" .head_title").removeClass("selected")}function closeIframe(dialogId){$("#"+dialogId).addClass("none");$("#progress-overlay").removeClass("in")}if(window.JSON){$.parseJSON=JSON.parse}$.GetSetData={getData:function(url,handler){if(url.indexOf("?")<0){url+="?"+Math.random()}$.ajax({url:url,cache:false,type:"get",dataType:"text",async:true,success:function(data,status){if(data.indexOf("login.js")>0){top.location.href="login.html";return}if(typeof handler=="function"){handler.apply(this,arguments)}},error:function(msg,status){if(typeof handler=="function"){handler.apply(this,arguments)}},complete:function(xhr){xhr=null}})},getDataSync:function(url,handler){if(url.indexOf("?")<0){url+="?"+Math.random()}$.ajax({url:url,cache:false,type:"get",dataType:"text",async:false,success:function(data,status){if(data.indexOf("login.js")>0){top.location.href="login.html";return}if(typeof handler=="function"){handler.apply(this,arguments)}},error:function(msg,status){if(typeof handler=="function"){handler.apply(this,arguments)}},complete:function(xhr){xhr=null}})},getJson:function(url,handler){this.getData(url,function(data){handler($.parseJSON(data))})},getHtml:function(elems,url,handler){this.getData(url,function(data,status){if(status=="success"){elems.html(data)}handler(status);data=null;elems=null})},setData:function(url,data,handler){var ajaxSet=$.ajax({url:url,cache:false,type:"get",dataType:"text",async:true,data:data,timeout:10000,success:function(data){if(data.indexOf("login.js")>0){top.location.href="login.html";return}if((typeof handler).toString()=="function"){handler(data)}},complete:function(XMLHttpRequest,status){if(status=="timeout"||status=="error"){ajaxSet.abort();if(url!="goform/getWizard"&&url!="goform/getWifiRelay"){return}if((typeof handler).toString()=="function"){handler('{"timeout": true}')}}}})}};function createTextInput(elem,wrapper){var $elem=$(elem),newField=document.createElement("input"),$newField;newField.setAttribute("type","text");newField.setAttribute("maxLength",elem.getAttribute("maxLength"));newField.setAttribute("id",elem.id+"_");newField.className=elem.className;newField.setAttribute("placeholder",elem.getAttribute("placeholder")||"");if(elem.getAttribute("data-options")){newField.setAttribute("data-options",elem.getAttribute("data-options"))}if(elem.getAttribute("required")){newField.setAttribute("required",elem.getAttribute("required"))}elem.parentNode.insertBefore(newField,elem);$newField=$(newField);$("#"+wrapper).on("click",".icon-show",function(){$(this).removeClass("icon-show").addClass("icon-hide");newField.value=elem.value;$elem.hide();$newField.show()});$("#"+wrapper).on("click",".icon-hide",function(){$(this).removeClass("icon-hide").addClass("icon-show");elem.value=newField.value;$newField.hide();$elem.show()});if(elem.value!==""){$elem.hide();$newField.show()}else{$newField.hide();newField.value=elem.value}return newField}function escapeText(s){if(!s){return""}s=s+"";return s.replace(/['"<>&]/g,function(s){switch(s){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}})};