define(function(require,exports,module){function ModuleLogic(view,submit){var that=this;var view=view;view.initFlag=false;this.init=function(){view.getValue("goform/getWifi",{module1:"wifiBasic"});view.addEvent()};this.reCancel=function(){$("#wifiSSID").removeValidateTip(true).parent().removeClass("has-feedback has-error");$("#wifiPwd").removeValidateTip(true).parent().removeClass("has-feedback has-error");view.getValue("goform/getWifi",{module1:"wifiBasic"})};this.checkData=function(){var noNeedPwd=$("#wifiNoPwd")[0].checked?true:false;if(!noNeedPwd&&$("#wifiPwd").val()===""){return _("Please specify a WiFi password.")}};this.validate=$.validate({custom:function(){var msg=that.checkData();if(msg){return msg}},success:function(){var data=view.getSubmitData();var subObj={url:"goform/setWifi",subData:data,successCallback:view.successCallback,errorCallback:view.showErrMsg};submit.preSubmit(subObj)},error:function(msg){if(msg){view.showInvalidError(msg)}}})}var moduleView=new ModuleView();var moduleSubmit=new ModuleSubmit();moduleView.initValue=function(obj){moduleView.data=obj.wifiBasic;inputValue(moduleView.data);if(!$("#wifiPwd_").length){$("#wifiPwd").initPassword("")}G_last_password=moduleView.data.wifiPwd;needPwd()};moduleView.addEvent=function(){$("#wifiNoPwd").on("click",needPwd);var newInput,$ele=$("#wifiPwd");if(isSupChangeType($ele)){$("#iconContainer").on("click",".icon-show",function(){$(this).removeClass("icon-show").addClass("icon-hide");$ele.attr("type","text")});$("#iconContainer").on("click",".icon-hide",function(){$(this).removeClass("icon-hide").addClass("icon-show");$ele.attr("type","password")})}else{}};var G_last_password;function needPwd(event){var flag=$("#wifiNoPwd")[0].checked?true:false;if(flag){G_last_password=$("#wifiPwd").val()||$("#wifiPwd_").val();$("#wifiPwd").attr("disabled",true);$("#wifiPwd").parent().attr("disabled",true);$("#wifiPwd").val("");$("#wifiPwd_").attr("disabled",true);$("#wifiPwd_").val("");$("#wifiPwd").hideValidateTip()}else{$("#wifiPwd").attr("disabled",false);$("#wifiPwd").parent().attr("disabled",false);$("#wifiPwd_").attr("disabled",false);$("#wifiPwd").val(G_last_password);$("#wifiPwd_").val(G_last_password)}}moduleView.getSubmitData=function(){var obj={module1:"setWifiBasic",wifiSSID:$("#wifiSSID").val(),wifiPwd:$("#wifiPwd").val(),wifiNoPwd:$("#wifiNoPwd")[0].checked?"true":"false",wifiHideSSID:$("#wifiHideSSID")[0].checked?"true":"false"};return objToString(obj)};function isSupChangeType(passwordElem){try{passwordElem.attr("type","text");if(passwordElem.attr("type")==="text"){passwordElem.attr("type","password");return true}}catch(d){return false}}var moduleLogic=new ModuleLogic(moduleView,moduleSubmit);module.exports=moduleLogic});